<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head th:include="snippets/header.html :: headerFragment">
   <title id="pageTitle">Schedule a Renjin Web Report</title>
</head>
<body>
   <div th:include="snippets/menu.html :: menu"/>
   <div class="container">
      <h3>Schedule report</h3>

         <form action="/manage/schedule" method="post">
            <div class="form-group row">
               <div class="col-md-3">
                  <label for="reportName">Report</label>
                  <select id = "reportName" name="reportName" class="form-control">
                     <option th:each="report: ${reportList}" th:value="${report}" th:text="${report}">
                     </option>
                  </select>
               </div>
            </div>
            <div class="form-group row">
               <div class="col-md-3">
                  <label for="cronVal">Schedule</label>
                  <input id="cronVal" name="cronVal" readonly="readonly" class="form-control"/>
               </div>
               <div class="col-md-5 pt-3">
                  <br/>
                  <div id="cronSchedule"></div>
               </div>
            </div>
            <div class="form-group row">
               <div class="col-md-8">
                  <label for="emails" title="Semicolon separated list of report recipients">Emails</label>
                  <input id="emails" name="emails" class="form-control" title="Semicolon separated list of report recipients"/>&nbsp;
               </div>
            </div>
            <div class="form-group row">
               <div class="col-md-2">
                  <button type="submit" class="btn btn-primary">Schedule</button>
               </div>
            </div>
         </form>
   </div>

   <script type="text/javascript" th:src="@{/js/cron/jquery-cron.js}"></script>

   <link type="text/css" th:href="@{/js/cron/jquery-cron.css}" rel="stylesheet" />
   <script type="text/javascript" th:src="@{/js/gentleSelect/jquery-gentleSelect.js}"></script>
   <link type="text/css" th:href="@{/js/gentleSelect/jquery-gentleSelect.css}" rel="stylesheet" />

   <script>
      $(document).ready(function() {
         $('#cronSchedule').cron({
            initial: "30 9 * * 1",
            onChange: function() {
               $('#cronVal').val($(this).cron("value"));
            },
            useGentleSelect: true
         });
      });
   </script>
</body>
</html>